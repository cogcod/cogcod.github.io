import{g as m,u as h,a as f,r as d,j as e,m as g,b as x,c as p,R as j,d as l,A as y,I as k,e as A,B as v,f as w}from"./.pnpm-w7k1FWwI.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();const L=m`
  mutation KakaoAuth($code: String!) {
    kakaoAuth(input: { code: $code }) {
      accessToken
      refreshToken
    }
  }
`;function b(){const[i,{loading:s,error:r}]=h(L),n=f(),[t,o]=d.useState("Completing authentication");return d.useEffect(()=>{const u=new URLSearchParams(n.search).get("code");u?i({variables:{code:u}}).then(({data:a})=>{console.log("## data",a),localStorage.setItem("accessToken",a.kakaoAuth.accessToken),localStorage.setItem("refreshToken",a.kakaoAuth.refreshToken),o("Authentication successful. Redirecting..."),setTimeout(()=>{window.location.href="/home"},2e3)}).catch(a=>{console.error("Authentication error:",a),o("Authentication failed. Please try again.")}):o("No authentication code found.")},[i,n]),s?e.jsx("div",{children:"Loading..."}):r?e.jsxs("div",{children:["Error: ",r.message]}):e.jsx(e.Fragment,{children:e.jsx("div",{children:t})})}const K=g("초기값"),O=m`
  query GetKakaoLoginUrl {
    getKakaoLoginUrl {
      url
    }
  }
`;function T(){const{loading:i,error:s,data:r}=x(O),n=p(K);console.log("apollo 전역변수 test ==>",n);const t=()=>{r&&r.getKakaoLoginUrl&&(window.location.href=r.getKakaoLoginUrl.url)};return i?e.jsx("p",{children:"Loading..."}):s?e.jsxs("p",{children:["Error: ",s.message]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[e.jsx("img",{alt:"Your Company",src:"https://tailwindui.com/img/logos/mark.svg?color=indigo&shade=600",className:"mx-auto h-10 w-auto"}),e.jsx("h2",{className:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900",children:"TODOKKAEBI"})]}),e.jsxs("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:["투두깨비에 오신 것을 환영합니다!😄",e.jsx("div",{children:e.jsx("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",onClick:t,children:"KAKAO LOGIN"})})]})]})})}function N(){return e.jsx(e.Fragment,{children:e.jsx("h1",{children:"Home"})})}function E(){return e.jsxs(j,{children:[e.jsx(l,{path:"/",element:e.jsx(T,{})}),e.jsx(l,{path:"/kakao/callback",element:e.jsx(b,{})}),e.jsx(l,{path:"/home",element:e.jsx(N,{})})]})}const P=new y({uri:"http://54.180.61.91:5000/graphql/",cache:new k});A(document.getElementById("root")).render(e.jsx(v,{children:e.jsx(w,{client:P,children:e.jsx(E,{})})}));
